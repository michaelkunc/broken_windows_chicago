var crimeData = [{
    "arrest": false,
    "beat": "0513",
    "block": "003XX W 110TH ST",
    "case_number": "HY191041",
    "community_area": "49",
    "date": "2014-11-02T05:57:00.000",
    "description": "HARASSMENT BY TELEPHONE",
    "district": "005",
    "domestic": false,
    "fbi_code": "26",
    "id": "10001595",
    "iucr": "2825",
    "latitude": "41.694202189",
    "location": {
        "type": "Point",
        "coordinates": [-87.631029,
            41.694202
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.631029227",
    "primary_type": "OTHER OFFENSE",
    "updated_on": "2015-03-22T16:07:18.000",
    "ward": "34",
    "x_coordinate": "1176057",
    "y_coordinate": "1831941",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1412",
    "block": "030XX N DRAKE AVE",
    "case_number": "HY223111",
    "community_area": "21",
    "date": "2014-11-02T08:00:00.000",
    "description": "NON-AGGRAVATED",
    "district": "014",
    "domestic": true,
    "fbi_code": "02",
    "id": "10033820",
    "iucr": "0281",
    "latitude": "41.937241732",
    "location": {
        "type": "Point",
        "coordinates": [-87.716254,
            41.937242
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.716254327",
    "primary_type": "CRIM SEXUAL ASSAULT",
    "updated_on": "2015-04-19T16:16:17.000",
    "ward": "35",
    "x_coordinate": "1152145",
    "y_coordinate": "1920325",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1422",
    "block": "033XX W POTOMAC AVE",
    "case_number": "HY245282",
    "community_area": "23",
    "date": "2014-11-03T09:40:00.000",
    "description": "HARASSMENT BY ELECTRONIC MEANS",
    "district": "014",
    "domestic": true,
    "fbi_code": "26",
    "id": "10056031",
    "iucr": "2826",
    "latitude": "41.904728955",
    "location": {
        "type": "Point",
        "coordinates": [-87.710818,
            41.904729
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.710818472",
    "primary_type": "OTHER OFFENSE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "26",
    "x_coordinate": "1153710",
    "y_coordinate": "1908488",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0825",
    "block": "061XX S WASHTENAW AVE",
    "case_number": "HY182695",
    "community_area": "66",
    "date": "2014-12-01T00:01:00.000",
    "description": "CRIMINAL SEXUAL ABUSE",
    "district": "008",
    "domestic": false,
    "fbi_code": "17",
    "id": "10056079",
    "iucr": "1563",
    "latitude": "41.782462726",
    "location": {
        "type": "Point",
        "coordinates": [-87.691195,
            41.782463
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.691195037",
    "primary_type": "SEX OFFENSE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "15",
    "x_coordinate": "1159385",
    "y_coordinate": "1863974",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0112",
    "block": "0000X N STATE ST",
    "case_number": "HY242949",
    "community_area": "32",
    "date": "2014-11-11T12:00:00.000",
    "description": "CREDIT CARD FRAUD",
    "district": "001",
    "domestic": false,
    "fbi_code": "11",
    "id": "10057113",
    "iucr": "1150",
    "latitude": "41.882587116",
    "location": {
        "type": "Point",
        "coordinates": [-87.628001,
            41.882587
        ]
    },
    "location_description": "DEPARTMENT STORE",
    "longitude": "-87.628000581",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "42",
    "x_coordinate": "1176321",
    "y_coordinate": "1900594",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1611",
    "block": "072XX W COYLE AVE",
    "case_number": "HY246383",
    "community_area": "9",
    "date": "2014-12-17T12:00:00.000",
    "description": "HARASSMENT BY ELECTRONIC MEANS",
    "district": "016",
    "domestic": false,
    "fbi_code": "26",
    "id": "10057197",
    "iucr": "2826",
    "latitude": "42.007287058",
    "location": {
        "type": "Point",
        "coordinates": [-87.807074,
            42.007287
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.807073582",
    "primary_type": "OTHER OFFENSE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "41",
    "x_coordinate": "1127278",
    "y_coordinate": "1945685",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1654",
    "block": "005XX W OHARE ST",
    "case_number": "HY242019",
    "community_area": "76",
    "date": "2014-11-20T16:00:00.000",
    "description": "THEFT BY LESSEE,MOTOR VEH",
    "district": "016",
    "domestic": false,
    "fbi_code": "11",
    "id": "10057452",
    "iucr": "1206",
    "latitude": "41.980716512",
    "location": {
        "type": "Point",
        "coordinates": [-87.883612,
            41.980717
        ]
    },
    "location_description": "AIRPORT VENDING ESTABLISHMENT",
    "longitude": "-87.883612088",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "41",
    "x_coordinate": "1106527",
    "y_coordinate": "1935884",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0834",
    "block": "083XX S KILPATRICK AVE",
    "case_number": "HY246795",
    "community_area": "70",
    "date": "2014-07-01T14:00:00.000",
    "description": "FRAUD OR CONFIDENCE GAME",
    "district": "008",
    "domestic": false,
    "fbi_code": "11",
    "id": "10057760",
    "iucr": "1130",
    "latitude": "41.740947479",
    "location": {
        "type": "Point",
        "coordinates": [-87.739254,
            41.740947
        ]
    },
    "location_description": "OTHER",
    "longitude": "-87.739253823",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "18",
    "x_coordinate": "1146382",
    "y_coordinate": "1848752",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0832",
    "block": "067XX S CAMPBELL AVE",
    "case_number": "HY246663",
    "community_area": "66",
    "date": "2014-06-13T09:00:00.000",
    "description": "$500 AND UNDER",
    "district": "008",
    "domestic": false,
    "fbi_code": "06",
    "id": "10057791",
    "iucr": "0820",
    "latitude": "41.771102397",
    "location": {
        "type": "Point",
        "coordinates": [-87.686004,
            41.771102
        ]
    },
    "location_description": "RESIDENCE-GARAGE",
    "longitude": "-87.68600384",
    "primary_type": "THEFT",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "15",
    "x_coordinate": "1160832",
    "y_coordinate": "1859845",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2223",
    "block": "094XX S PARNELL AVE",
    "case_number": "HY247052",
    "community_area": "73",
    "date": "2014-05-10T00:00:00.000",
    "description": "BOGUS CHECK",
    "district": "022",
    "domestic": false,
    "fbi_code": "11",
    "id": "10057890",
    "iucr": "1110",
    "latitude": "41.72219144",
    "location": {
        "type": "Point",
        "coordinates": [-87.637325,
            41.722191
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.637325403",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "21",
    "x_coordinate": "1174255",
    "y_coordinate": "1842126",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1133",
    "block": "007XX S CENTRAL PARK AVE",
    "case_number": "HY247013",
    "community_area": "27",
    "date": "2014-11-04T09:00:00.000",
    "description": "FORGERY",
    "district": "011",
    "domestic": false,
    "fbi_code": "10",
    "id": "10057927",
    "iucr": "1120",
    "latitude": "41.872026114",
    "location": {
        "type": "Point",
        "coordinates": [-87.71545,
            41.872026
        ]
    },
    "location_description": "OTHER",
    "longitude": "-87.71545006",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "24",
    "x_coordinate": "1152535",
    "y_coordinate": "1896562",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1032",
    "block": "033XX S KEDZIE AVE",
    "case_number": "HY246768",
    "community_area": "30",
    "date": "2014-10-01T12:00:00.000",
    "description": "BOGUS CHECK",
    "district": "010",
    "domestic": false,
    "fbi_code": "11",
    "id": "10058019",
    "iucr": "1110",
    "latitude": "41.832025711",
    "location": {
        "type": "Point",
        "coordinates": [-87.70482,
            41.832026
        ]
    },
    "location_description": "COMMERCIAL / BUSINESS OFFICE",
    "longitude": "-87.704819536",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "22",
    "x_coordinate": "1155537",
    "y_coordinate": "1882007",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0813",
    "block": "061XX S KOLIN AVE",
    "case_number": "HY247893",
    "community_area": "65",
    "date": "2014-12-08T15:00:00.000",
    "description": "FORCIBLE ENTRY",
    "district": "008",
    "domestic": false,
    "fbi_code": "05",
    "id": "10059059",
    "iucr": "0610",
    "latitude": "41.781518772",
    "location": {
        "type": "Point",
        "coordinates": [-87.731246,
            41.781519
        ]
    },
    "location_description": "VACANT LOT/LAND",
    "longitude": "-87.731245904",
    "primary_type": "BURGLARY",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "13",
    "x_coordinate": "1148464",
    "y_coordinate": "1863551",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0723",
    "block": "064XX S LOWE AVE",
    "case_number": "HY247655",
    "community_area": "68",
    "date": "2014-12-25T09:00:00.000",
    "description": "$500 AND UNDER",
    "district": "007",
    "domestic": false,
    "fbi_code": "06",
    "id": "10059140",
    "iucr": "0820",
    "latitude": "41.777811266",
    "location": {
        "type": "Point",
        "coordinates": [-87.640669,
            41.777811
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.640669209",
    "primary_type": "THEFT",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "16",
    "x_coordinate": "1173179",
    "y_coordinate": "1862386",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0925",
    "block": "003XX W 42ND PL",
    "case_number": "HY248338",
    "community_area": "37",
    "date": "2014-11-05T10:00:00.000",
    "description": "FINANCIAL IDENTITY THEFT OVER $ 300",
    "district": "009",
    "domestic": false,
    "fbi_code": "11",
    "id": "10059573",
    "iucr": "1153",
    "latitude": "41.817378504",
    "location": {
        "type": "Point",
        "coordinates": [-87.634806,
            41.817379
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.634806284",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "3",
    "x_coordinate": "1174661",
    "y_coordinate": "1876817",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0622",
    "block": "005XX W 81ST ST",
    "case_number": "HY248413",
    "community_area": "44",
    "date": "2014-09-15T00:00:00.000",
    "description": "FINAN EXPLOIT-ELDERLY/DISABLED",
    "district": "006",
    "domestic": true,
    "fbi_code": "11",
    "id": "10059703",
    "iucr": "1195",
    "latitude": "41.746979123",
    "location": {
        "type": "Point",
        "coordinates": [-87.637047,
            41.746979
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.637046742",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "21",
    "x_coordinate": "1174258",
    "y_coordinate": "1851159",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1224",
    "block": "008XX W RANDOLPH ST",
    "case_number": "HY248802",
    "community_area": "28",
    "date": "2014-10-10T20:10:00.000",
    "description": "OBSTRUCTING IDENTIFICATION",
    "district": "012",
    "domestic": false,
    "fbi_code": "24",
    "id": "10059968",
    "iucr": "3731",
    "latitude": "41.884606074",
    "location": {
        "type": "Point",
        "coordinates": [-87.648727,
            41.884606
        ]
    },
    "location_description": "RESTAURANT",
    "longitude": "-87.64872713",
    "primary_type": "INTERFERENCE WITH PUBLIC OFFICER",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "27",
    "x_coordinate": "1170671",
    "y_coordinate": "1901284",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1833",
    "block": "0000X E OAK ST",
    "case_number": "HY249429",
    "community_area": "8",
    "date": "2014-03-08T16:05:00.000",
    "description": "CREDIT CARD FRAUD",
    "district": "018",
    "domestic": false,
    "fbi_code": "11",
    "id": "10060984",
    "iucr": "1150",
    "latitude": "41.900647156",
    "location": {
        "type": "Point",
        "coordinates": [-87.627589,
            41.900647
        ]
    },
    "location_description": "DEPARTMENT STORE",
    "longitude": "-87.627588812",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "42",
    "x_coordinate": "1176379",
    "y_coordinate": "1907176",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0713",
    "block": "057XX S ELIZABETH ST",
    "case_number": "HY249481",
    "community_area": "67",
    "date": "2014-06-01T12:00:00.000",
    "description": "FINANCIAL IDENTITY THEFT OVER $ 300",
    "district": "007",
    "domestic": false,
    "fbi_code": "11",
    "id": "10061048",
    "iucr": "1153",
    "latitude": "41.788918852",
    "location": {
        "type": "Point",
        "coordinates": [-87.656101,
            41.788919
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.656100886",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "16",
    "x_coordinate": "1168938",
    "y_coordinate": "1866400",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1431",
    "block": "025XX W CHARLESTON ST",
    "case_number": "HY249799",
    "community_area": "22",
    "date": "2014-10-28T10:00:00.000",
    "description": "FORGERY",
    "district": "014",
    "domestic": false,
    "fbi_code": "10",
    "id": "10061281",
    "iucr": "1120",
    "latitude": "41.920073724",
    "location": {
        "type": "Point",
        "coordinates": [-87.690225,
            41.920074
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.690225075",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "1",
    "x_coordinate": "1159274",
    "y_coordinate": "1914121",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0914",
    "block": "027XX S SHIELDS AVE",
    "case_number": "HY249582",
    "community_area": "34",
    "date": "2014-11-01T09:45:00.000",
    "description": "AGG CRIMINAL SEXUAL ABUSE",
    "district": "009",
    "domestic": false,
    "fbi_code": "17",
    "id": "10061394",
    "iucr": "1562",
    "latitude": "41.843877489",
    "location": {
        "type": "Point",
        "coordinates": [-87.635315,
            41.843877
        ]
    },
    "location_description": "SCHOOL, PUBLIC, BUILDING",
    "longitude": "-87.635314517",
    "primary_type": "SEX OFFENSE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "11",
    "x_coordinate": "1174444",
    "y_coordinate": "1886472",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1934",
    "block": "029XX N BROADWAY",
    "case_number": "HY250351",
    "community_area": "6",
    "date": "2014-11-25T12:00:00.000",
    "description": "OVER $500",
    "district": "019",
    "domestic": false,
    "fbi_code": "06",
    "id": "10061991",
    "iucr": "0810",
    "latitude": "41.935051953",
    "location": {
        "type": "Point",
        "coordinates": [-87.64438,
            41.935052
        ]
    },
    "location_description": "SMALL RETAIL STORE",
    "longitude": "-87.644380344",
    "primary_type": "THEFT",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "44",
    "x_coordinate": "1171707",
    "y_coordinate": "1919676",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1412",
    "block": "028XX N KEDZIE AVE",
    "case_number": "HY249299",
    "community_area": "21",
    "date": "2014-09-01T00:01:00.000",
    "description": "OVER $500",
    "district": "014",
    "domestic": true,
    "fbi_code": "06",
    "id": "10062010",
    "iucr": "0810",
    "latitude": "41.93358633",
    "location": {
        "type": "Point",
        "coordinates": [-87.707616,
            41.933586
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.707616184",
    "primary_type": "THEFT",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "35",
    "x_coordinate": "1154505",
    "y_coordinate": "1919010",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1722",
    "block": "045XX N ELSTON AVE",
    "case_number": "HY251199",
    "community_area": "16",
    "date": "2014-03-15T09:00:00.000",
    "description": "AUTOMOBILE",
    "district": "017",
    "domestic": false,
    "fbi_code": "07",
    "id": "10062904",
    "iucr": "0910",
    "latitude": "41.96409451",
    "location": {
        "type": "Point",
        "coordinates": [-87.734512,
            41.964095
        ]
    },
    "location_description": "VEHICLE-COMMERCIAL",
    "longitude": "-87.734512219",
    "primary_type": "MOTOR VEHICLE THEFT",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "45",
    "x_coordinate": "1147109",
    "y_coordinate": "1930075",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0533",
    "block": "003XX E 134TH ST",
    "case_number": "HY250798",
    "community_area": "54",
    "date": "2014-01-09T00:01:00.000",
    "description": "FINANCIAL IDENTITY THEFT OVER $ 300",
    "district": "005",
    "domestic": false,
    "fbi_code": "11",
    "id": "10063274",
    "iucr": "1153",
    "latitude": "41.651945223",
    "location": {
        "type": "Point",
        "coordinates": [-87.61335,
            41.651945
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.613350278",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "9",
    "x_coordinate": "1181014",
    "y_coordinate": "1816583",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0432",
    "block": "101XX S AVENUE J",
    "case_number": "HY251822",
    "community_area": "52",
    "date": "2014-01-01T00:01:00.000",
    "description": "FINANCIAL IDENTITY THEFT OVER $ 300",
    "district": "004",
    "domestic": false,
    "fbi_code": "11",
    "id": "10063459",
    "iucr": "1153",
    "latitude": "41.710581842",
    "location": {
        "type": "Point",
        "coordinates": [-87.534222,
            41.710582
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.534221735",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "10",
    "x_coordinate": "1202441",
    "y_coordinate": "1838140",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0734",
    "block": "070XX S ADA ST",
    "case_number": "HX422997",
    "community_area": "67",
    "date": "2014-09-10T11:51:00.000",
    "description": "TO PROPERTY",
    "district": "007",
    "domestic": false,
    "fbi_code": "14",
    "id": "10063477",
    "iucr": "1310",
    "latitude": "41.765483339",
    "location": {
        "type": "Point",
        "coordinates": [-87.657627,
            41.765483
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.657626678",
    "primary_type": "CRIMINAL DAMAGE",
    "updated_on": "2015-05-11T12:38:40.000",
    "ward": "17",
    "x_coordinate": "1168589",
    "y_coordinate": "1857857",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2223",
    "block": "004XX W 98TH ST",
    "case_number": "HX219085",
    "community_area": "73",
    "date": "2014-04-10T17:45:00.000",
    "description": "OVER $500",
    "district": "022",
    "domestic": false,
    "fbi_code": "06",
    "id": "9568427",
    "iucr": "0810",
    "latitude": "41.716232906",
    "location": {
        "type": "Point",
        "coordinates": [-87.634511,
            41.716233
        ]
    },
    "location_description": "RESIDENCE-GARAGE",
    "longitude": "-87.634510779",
    "primary_type": "THEFT",
    "updated_on": "2014-04-13T00:40:06.000",
    "ward": "21",
    "x_coordinate": "1175041",
    "y_coordinate": "1839961",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2512",
    "block": "023XX N MELVINA AVE",
    "case_number": "HX219098",
    "community_area": "19",
    "date": "2014-04-11T01:00:00.000",
    "description": "AUTOMOBILE",
    "district": "025",
    "domestic": false,
    "fbi_code": "07",
    "id": "9568557",
    "iucr": "0910",
    "latitude": "41.922626214",
    "location": {
        "type": "Point",
        "coordinates": [-87.780395,
            41.922626
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.78039454",
    "primary_type": "MOTOR VEHICLE THEFT",
    "updated_on": "2014-04-17T00:38:31.000",
    "ward": "29",
    "x_coordinate": "1134728",
    "y_coordinate": "1914880",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "1421",
    "block": "018XX N SAWYER AVE",
    "case_number": "HX219135",
    "community_area": "22",
    "date": "2014-04-11T07:40:00.000",
    "description": "UNLAWFUL ENTRY",
    "district": "014",
    "domestic": false,
    "fbi_code": "05",
    "id": "9568574",
    "iucr": "0620",
    "latitude": "41.914713259",
    "location": {
        "type": "Point",
        "coordinates": [-87.708436,
            41.914713
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.70843618",
    "primary_type": "BURGLARY",
    "updated_on": "2014-05-07T00:40:24.000",
    "ward": "26",
    "x_coordinate": "1154332",
    "y_coordinate": "1912131",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0233",
    "block": "054XX S INGLESIDE AVE",
    "case_number": "HX219159",
    "community_area": "41",
    "date": "2014-04-11T08:15:00.000",
    "description": "OVER $500",
    "district": "002",
    "domestic": false,
    "fbi_code": "06",
    "id": "9568593",
    "iucr": "0810",
    "latitude": "41.79660904",
    "location": {
        "type": "Point",
        "coordinates": [-87.602914,
            41.796609
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.602913516",
    "primary_type": "THEFT",
    "updated_on": "2014-04-23T00:39:11.000",
    "ward": "5",
    "x_coordinate": "1183419",
    "y_coordinate": "1869321",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2433",
    "block": "061XX N BROADWAY",
    "case_number": "HX219642",
    "community_area": "77",
    "date": "2014-04-04T21:00:00.000",
    "description": "AUTOMOBILE",
    "district": "024",
    "domestic": false,
    "fbi_code": "07",
    "id": "9569514",
    "iucr": "0910",
    "latitude": "41.993443841",
    "location": {
        "type": "Point",
        "coordinates": [-87.660227,
            41.993444
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.6602274",
    "primary_type": "MOTOR VEHICLE THEFT",
    "updated_on": "2014-04-16T00:38:21.000",
    "ward": "48",
    "x_coordinate": "1167228",
    "y_coordinate": "1940920",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2031",
    "block": "048XX N FRANCISCO AVE",
    "case_number": "HX219617",
    "community_area": "4",
    "date": "2014-04-11T13:45:00.000",
    "description": "SIMPLE",
    "district": "020",
    "domestic": false,
    "fbi_code": "08B",
    "id": "9569516",
    "iucr": "0460",
    "latitude": "41.969518066",
    "location": {
        "type": "Point",
        "coordinates": [-87.700425,
            41.969518
        ]
    },
    "location_description": "SIDEWALK",
    "longitude": "-87.700425021",
    "primary_type": "BATTERY",
    "updated_on": "2014-04-15T00:40:31.000",
    "ward": "40",
    "x_coordinate": "1156365",
    "y_coordinate": "1932118",
    "year": "2014"
}, {
    "arrest": true,
    "beat": "1921",
    "block": "035XX N WESTERN AVE",
    "case_number": "HX220160",
    "community_area": "5",
    "date": "2014-04-11T20:50:00.000",
    "description": "OVER $500",
    "district": "019",
    "domestic": false,
    "fbi_code": "06",
    "id": "9569839",
    "iucr": "0810",
    "latitude": "41.946002871",
    "location": {
        "type": "Point",
        "coordinates": [-87.68809,
            41.946003
        ]
    },
    "location_description": "OTHER",
    "longitude": "-87.688089852",
    "primary_type": "THEFT",
    "updated_on": "2014-06-01T12:40:50.000",
    "ward": "47",
    "x_coordinate": "1159784",
    "y_coordinate": "1923574",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "2533",
    "block": "045XX W DIVISION ST",
    "case_number": "HX220209",
    "community_area": "23",
    "date": "2014-04-11T22:00:00.000",
    "description": "TO VEHICLE",
    "district": "025",
    "domestic": false,
    "fbi_code": "14",
    "id": "9569965",
    "iucr": "1320",
    "latitude": "41.902556515",
    "location": {
        "type": "Point",
        "coordinates": [-87.740036,
            41.902557
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.740035611",
    "primary_type": "CRIMINAL DAMAGE",
    "updated_on": "2014-04-17T00:38:31.000",
    "ward": "37",
    "x_coordinate": "1145762",
    "y_coordinate": "1907640",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0931",
    "block": "022XX W 50TH PL",
    "case_number": "HX220398",
    "community_area": "63",
    "date": "2014-04-12T01:10:00.000",
    "description": "BY FIRE",
    "district": "009",
    "domestic": false,
    "fbi_code": "09",
    "id": "9569997",
    "iucr": "1020",
    "latitude": "41.801964648",
    "location": {
        "type": "Point",
        "coordinates": [-87.680661,
            41.801965
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.680661321",
    "primary_type": "ARSON",
    "updated_on": "2014-04-19T00:38:43.000",
    "ward": "16",
    "x_coordinate": "1162204",
    "y_coordinate": "1871102",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0214",
    "block": "040XX S ELLIS AVE",
    "case_number": "HX220675",
    "community_area": "36",
    "date": "2014-04-11T20:30:00.000",
    "description": "TO VEHICLE",
    "district": "002",
    "domestic": false,
    "fbi_code": "14",
    "id": "9570211",
    "iucr": "1320",
    "latitude": "41.820964593",
    "location": {
        "type": "Point",
        "coordinates": [-87.603363,
            41.820965
        ]
    },
    "location_description": "STREET",
    "longitude": "-87.603363192",
    "primary_type": "CRIMINAL DAMAGE",
    "updated_on": "2014-04-15T00:40:31.000",
    "ward": "4",
    "x_coordinate": "1183221",
    "y_coordinate": "1878195",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0725",
    "block": "063XX S PAULINA ST",
    "case_number": "HX220669",
    "community_area": "67",
    "date": "2014-04-10T15:00:00.000",
    "description": "$500 AND UNDER",
    "district": "007",
    "domestic": true,
    "fbi_code": "06",
    "id": "9570212",
    "iucr": "0820",
    "latitude": "41.778344579",
    "location": {
        "type": "Point",
        "coordinates": [-87.666804,
            41.778345
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.666804031",
    "primary_type": "THEFT",
    "updated_on": "2014-04-18T00:39:21.000",
    "ward": "15",
    "x_coordinate": "1166049",
    "y_coordinate": "1862524",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0132",
    "block": "012XX S MICHIGAN AVE",
    "case_number": "HY386559",
    "community_area": "33",
    "date": "2014-12-20T12:00:00.000",
    "description": "FINANCIAL IDENTITY THEFT OVER $ 300",
    "district": "001",
    "domestic": false,
    "fbi_code": "11",
    "id": "10198935",
    "iucr": "1153",
    "latitude": "41.866277999",
    "location": {
        "type": "Point",
        "coordinates": [-87.62398,
            41.866278
        ]
    },
    "location_description": "RESIDENCE",
    "longitude": "-87.623979915",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "2",
    "x_coordinate": "1177465",
    "y_coordinate": "1894660",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0934",
    "block": "051XX S LAFLIN ST",
    "case_number": "HY387412",
    "community_area": "61",
    "date": "2014-01-01T00:00:00.000",
    "description": "ATTEMPT - FINANCIAL IDENTITY THEFT",
    "district": "009",
    "domestic": false,
    "fbi_code": "11",
    "id": "10199744",
    "iucr": "1156",
    "latitude": "41.800553594",
    "location": {
        "type": "Point",
        "coordinates": [-87.662474,
            41.800554
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.662473613",
    "primary_type": "DECEPTIVE PRACTICE",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "16",
    "x_coordinate": "1167167",
    "y_coordinate": "1870626",
    "year": "2014"
}, {
    "arrest": false,
    "beat": "0112",
    "block": "0000X N STATE ST",
    "case_number": "HX237527",
    "community_area": "32",
    "date": "2014-04-23T06:00:00.000",
    "description": "NON-AGGRAVATED",
    "district": "001",
    "domestic": false,
    "fbi_code": "02",
    "id": "9592729",
    "iucr": "0281",
    "location_description": "RESIDENCE",
    "primary_type": "CRIM SEXUAL ASSAULT",
    "updated_on": "2015-08-19T15:57:18.000",
    "ward": "42",
    "year": "2014"
}, {
    "arrest": true,
    "beat": "1723",
    "block": "038XX W LELAND AVE",
    "case_number": "HX207056",
    "community_area": "14",
    "date": "2014-04-01T15:24:57.000",
    "description": "POSS: CANNABIS MORE THAN 30GMS",
    "district": "017",
    "domestic": false,
    "fbi_code": "18",
    "id": "9584194",
    "iucr": "1812",
    "latitude": "41.966360147",
    "location": {
        "type": "Point",
        "coordinates": [-87.723361,
            41.96636
        ]
    },
    "location_description": "APARTMENT",
    "longitude": "-87.723360586",
    "primary_type": "NARCOTICS",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "39",
    "x_coordinate": "1150136",
    "y_coordinate": "1930922",
    "year": "2014"
}, {
    "arrest": true,
    "beat": "0221",
    "block": "004XX E 43RD ST",
    "case_number": "HX241857",
    "community_area": "38",
    "date": "2014-04-29T14:15:00.000",
    "description": "MANU/DEL:CANNABIS 10GM OR LESS",
    "district": "002",
    "domestic": false,
    "fbi_code": "18",
    "id": "9639757",
    "iucr": "1821",
    "latitude": "41.816539939",
    "location": {
        "type": "Point",
        "coordinates": [-87.615853,
            41.81654
        ]
    },
    "location_description": "VEHICLE NON-COMMERCIAL",
    "longitude": "-87.615853161",
    "primary_type": "NARCOTICS",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "3",
    "x_coordinate": "1179830",
    "y_coordinate": "1876554",
    "year": "2014"
}, {
    "arrest": true,
    "beat": "1134",
    "block": "033XX W FILLMORE ST",
    "case_number": "HX374720",
    "community_area": "29",
    "date": "2014-08-05T06:00:00.000",
    "description": "POSS: CANNABIS MORE THAN 30GMS",
    "district": "011",
    "domestic": false,
    "fbi_code": "18",
    "id": "9746880",
    "iucr": "1812",
    "latitude": "41.868285103",
    "location": {
        "type": "Point",
        "coordinates": [-87.709755,
            41.868285
        ]
    },
    "location_description": "POLICE FACILITY/VEH PARKING LOT",
    "longitude": "-87.709755003",
    "primary_type": "NARCOTICS",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "24",
    "x_coordinate": "1154096",
    "y_coordinate": "1895210",
    "year": "2014"
}, {
    "arrest": true,
    "beat": "0114",
    "block": "008XX S COLUMBUS DR",
    "case_number": "HX371366",
    "community_area": "32",
    "date": "2014-08-02T17:32:00.000",
    "description": "POSS: SYNTHETIC DRUGS",
    "district": "001",
    "domestic": false,
    "fbi_code": "18",
    "id": "9753372",
    "iucr": "2028",
    "latitude": "41.871633725",
    "location": {
        "type": "Point",
        "coordinates": [-87.620708,
            41.871634
        ]
    },
    "location_description": "PARK PROPERTY",
    "longitude": "-87.62070805",
    "primary_type": "NARCOTICS",
    "updated_on": "2015-08-24T15:27:20.000",
    "ward": "2",
    "x_coordinate": "1178340",
    "y_coordinate": "1896619",
    "year": "2014"
}];

var serviceData = [{
    "service_request_id": "14-00684314",
    "status": "closed",
    "status_notes": "CDOT Inspect Public Way Survey Transfer Outcome",
    "service_name": "Pothole in Street",
    "service_code": "4fd3b656e750846c53000004",
    "agency_responsible": "Division of In-House Construction CDOT",
    "requested_datetime": "2014-05-09T19:02:21-05:00",
    "updated_datetime": "2015-10-10T10:15:40-05:00",
    "address": "1200 W 81ST ST, CHICAGO, IL, 60620",
    "lat": 41.74685764200721,
    "long": -87.6536401592609,
    "attributes": {
        "WHEREIST": "TRAFFIC"
    },
    "extended_attributes": {
        "channel": "phone",
        "police": "6",
        "zip": "60620",
        "ward": "21"
    },
    "notes": [{
        "datetime": "2014-05-09T19:02:21-05:00",
        "summary": "Request opened",
        "type": "opened"
    }, {
        "datetime": "2014-07-29T14:11:00-05:00",
        "summary": "Final Outcome",
        "description": "CDOT Inspect Public Way Survey Transfer Outcome",
        "type": "activity"
    }, {
        "datetime": "2014-07-29T14:11:58-05:00",
        "summary": "Follow-on Inspect Public Way Construction Created",
        "description": "Inspect Public Way Survey #14-01225670 created for Transportation",
        "type": "follow_on_created",
        "extended_attributes": {
            "service_request_id": "14-01225670",
            "service_name": "Inspect Public Way Survey",
            "agency_responsible": "Transportation"
        }
    }, {
        "datetime": "2014-07-30T15:18:47-05:00",
        "summary": "Follow-on CDOT Recommended Restoration Created",
        "description": "CDOT Recommended Restoration #14-01235584 created for Water Management",
        "type": "follow_on_created",
        "extended_attributes": {
            "service_request_id": "14-01235584",
            "service_name": "CDOT Recommended Restoration",
            "agency_responsible": "Water Management"
        }
    }, {
        "datetime": "2014-07-30T15:18:48-05:00",
        "summary": "Follow-on Inspect Public Way Construction Closed",
        "description": "Inspect Public Way Survey #14-01225670 closed by Transportation",
        "type": "follow_on_closed",
        "extended_attributes": {
            "service_request_id": "14-01225670",
            "service_name": "Inspect Public Way Survey",
            "agency_responsible": "Transportation"
        }
    }, {
        "datetime": "2015-10-10T10:15:39-05:00",
        "summary": "Follow-on CDOT Recommended Restoration Closed",
        "description": "CDOT Recommended Restoration #14-01235584 closed by Water Management",
        "type": "follow_on_closed",
        "extended_attributes": {
            "service_request_id": "14-01235584",
            "service_name": "CDOT Recommended Restoration",
            "agency_responsible": "Water Management"
        }
    }, {
        "datetime": "2015-10-10T10:15:40-05:00",
        "summary": "Request closed",
        "type": "closed"
    }]
}, {
    "service_request_id": "14-02155558",
    "status": "closed",
    "status_notes": "Duplicate",
    "service_name": "Street Light Out",
    "service_code": "4ffa9f2d6018277d400000c8",
    "agency_responsible": "Division of Electrical Operations CDOT",
    "requested_datetime": "2014-12-17T18:39:03-06:00",
    "updated_datetime": "2015-10-09T15:26:59-05:00",
    "address": "4700 W 77TH ST, CHICAGO, IL, 60652",
    "lat": 41.752868524625285,
    "long": -87.73905188684553,
    "attributes": {
        "ISTHEPO1": "YES",
        "ISTHELI1": "STREET",
        "ISTHELI2": "COMPLETE"
    },
    "extended_attributes": {
        "duplicate": true,
        "parent_service_request_id": "15-05164921",
        "channel": "phone",
        "police": "8",
        "ward": "18",
        "zip": "60652"
    },
    "notes": [{
        "datetime": "2014-12-17T18:39:03-06:00",
        "summary": "Request opened",
        "type": "opened"
    }, {
        "datetime": "2015-10-09T15:26:59-05:00",
        "summary": "Request closed",
        "type": "closed"
    }]
}, {
    "service_request_id": "14-01880796",
    "status": "closed",
    "status_notes": "Transfer to Plumbing Violation",
    "service_name": "Building Violation",
    "service_code": "4fd3bd72e750846c530000cd",
    "agency_responsible": "DOB - Conservation",
    "requested_datetime": "2014-10-31T11:39:56-05:00",
    "updated_datetime": "2015-10-08T15:04:29-05:00",
    "address": "2516 W BELDEN AVE, CHICAGO, IL, 60647",
    "lat": 41.923272689558836,
    "long": -87.6896874099807,
    "attributes": {
        "OWNEROC1": "NO"
    },
    "extended_attributes": {
        "channel": "phone",
        "police": "14",
        "zip": "60647",
        "ward": "1"
    },
    "notes": [{
        "datetime": "2014-10-31T11:39:56-05:00",
        "summary": "Request opened",
        "type": "opened"
    }, {
        "datetime": "2015-04-27T10:26:00-05:00",
        "summary": "Assign Inspector",
        "description": "Transfer to Plumbing Violation",
        "type": "activity"
    }, {
        "datetime": "2015-04-27T10:28:17-05:00",
        "summary": "Follow-on Plumbing Violation Created",
        "description": "Plumbing Violation #15-01615813 created for Buildings",
        "type": "follow_on_created",
        "extended_attributes": {
            "service_request_id": "15-01615813",
            "service_name": "Plumbing Violation",
            "agency_responsible": "Buildings"
        }
    }, {
        "datetime": "2015-10-08T15:04:28-05:00",
        "summary": "Follow-on Plumbing Violation Closed",
        "description": "Plumbing Violation #15-01615813 closed by Buildings",
        "type": "follow_on_closed",
        "extended_attributes": {
            "service_request_id": "15-01615813",
            "service_name": "Plumbing Violation",
            "agency_responsible": "Buildings"
        }
    }, {
        "datetime": "2015-10-08T15:04:29-05:00",
        "summary": "Request closed",
        "type": "closed"
    }]
}];

// HEAT MAP
var map, heatmap;

function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: {
            lat: 41.8914,
            lng: -87.666
        },
        mapTypeId: google.maps.MapTypeId.MAP
    });

    heatmap = new google.maps.visualization.HeatmapLayer({
        data: getPoints(),
        map: map
    });
}

function toggleHeatmap() {
    heatmap.setMap(heatmap.getMap() ? null : map);
}

function changeGradient() {
    var gradient = [
        'rgba(0, 255, 255, 0)',
        'rgba(0, 255, 255, 1)',
        'rgba(0, 191, 255, 1)',
        'rgba(0, 127, 255, 1)',
        'rgba(0, 63, 255, 1)',
        'rgba(0, 0, 255, 1)',
        'rgba(0, 0, 223, 1)',
        'rgba(0, 0, 191, 1)',
        'rgba(0, 0, 159, 1)',
        'rgba(0, 0, 127, 1)',
        'rgba(63, 0, 91, 1)',
        'rgba(127, 0, 63, 1)',
        'rgba(191, 0, 31, 1)',
        'rgba(255, 0, 0, 1)'
    ];
    heatmap.set('gradient', heatmap.get('gradient') ? null : gradient);
}

function changeRadius() {
    heatmap.set('radius', heatmap.get('radius') ? null : 20);
}

function changeOpacity() {
    heatmap.set('opacity', heatmap.get('opacity') ? null : 0.2);
}

// my stuff
var coordinates = [];

// crime data point collection
for (var i = 0; i < crimeData.length; i++) {
    if ((crimeData[i].hasOwnProperty('latitude')) && (crimeData[i].hasOwnProperty('longitude'))) {
        coordinates.push([crimeData[i].latitude, crimeData[i].longitude]);
    }
}

//service datapoint collection
for (var i = 0; i < serviceData.length; i++) {
    if ((serviceData[i].hasOwnProperty('lat')) && (serviceData[i].hasOwnProperty('long'))) {
        serviceData[i]['longitude'] = serviceData[i]['long'];
        delete serviceData[i]['long'];
        serviceData[i]['latitude'] = serviceData[i]['lat'];
        delete serviceData[i]['lat'];
        coordinates.push([serviceData[i].latitude, serviceData[i].longitude]);
    }
}

function getPoints() {
    var points = [];
    for (var i = 0; i < coordinates.length; i++) {
        points.push(new google.maps.LatLng(coordinates[i][0], coordinates[i][1]));
    }
    return points;

}

// Crime Type Bar Chart

var crimeByType = {};

for (var i = 0; i < crimeData.length; i ++ ){
  var num = crimeData[i].primary_type;
  crimeByType[num] = crimeByType[num] ? crimeByType[num] + 1 : 1;
}

var crimeCounts = [];
// sorts the crime counts descending
for (var crime in crimeByType){
  crimeCounts.push([crime, crimeByType[crime]]);
  crimeCounts.sort(function(a,b) {return b[1] - a[1]});
};

var data = [
  {
    x: [crimeCounts[0][0], crimeCounts[1][0], crimeCounts[2][0], crimeCounts[3][0], crimeCounts[4][0], crimeCounts[5][0]],
    y: [crimeCounts[0][1], crimeCounts[1][1], crimeCounts[2][1], crimeCounts[3][1], crimeCounts[4][1], crimeCounts[5][1]],
    type: 'bar'
  }
];

Plotly.newPlot('crime_type_bar_chart', data);

// Crime/Service Request by ward

//crime by ward data
var crimeByWard = {};

var crimes = [];

for (var i = 0; i < crimeData.length; i ++ ){
  var num = crimeData[i].ward;
  crimeByWard[num] = crimeByWard[num] ? crimeByWard[num] + 1 : 1;
}

for (var o in crimeByWard){
    crimes.push(crimeByWard[o]);
};

//service by ward data

var serviceByWard = {};
var services = [];

for (var i = 0; i < serviceData.length; i ++ ){
  var num = serviceData[i]['extended_attributes']['ward'];
  serviceByWard[num] = serviceByWard[num] ? serviceByWard[num] + 1 : 1;
}

for (var o in serviceByWard){
    services.push(serviceByWard[o]);
}

var trace1 = {
  x: Object.keys(crimeByWard),
  y: crimes,
  name: 'Crime',
  type: 'bar'
};

var trace2 = {
  x: Object.keys(serviceByWard),
  y: services,
  name: '311 Requests',
  type: 'bar'
};

var data = [trace1, trace2];

var layout = {barmode: 'group'};

Plotly.newPlot('crime_311_by_ward', data, layout);

// bubble chart

var wardData = {};
var wardCounts = {};
var avgResponse = [];
var msDay = 60*60*24*1000;

serviceData.forEach(
  function(e) {
    if (!wardData[e.extended_attributes.ward]) {
      wardData[e.extended_attributes.ward] = 0;
      wardCounts[e.extended_attributes.ward] = 0;
    }
    var openDate = new Date(e.requested_datetime);
    var closeDate = new Date(e.updated_datetime);

    wardData[e.extended_attributes.ward] += Math.floor((closeDate - openDate) / msDay);
    wardCounts[e.extended_attributes.ward] ++;
  }
)

for (var ward in wardData) {
  avgResponse.push({ward : ward, responseTime : wardData[ward] / wardCounts[ward]})
}

// this exists elsewhere in the main chart.js file
var serviceCount = [];
for (var o in wardCounts){
  serviceCount.push(wardCounts[o]);
}

var responses = [];
for (var o in wardData) {
  responses.push(wardData[o]/50);
}


var bubbleTrace1 = {
  x: Object.keys(wardData),
  y: serviceCount,
  text: ['A<br>size: 40', 'B<br>size: 60', 'C<br>size: 80', 'D<br>size: 100'],
  mode: 'markers',
  marker: {
    color: ['rgb(93, 164, 214)', 'rgb(255, 144, 14)',  'rgb(44, 160, 101)', 'rgb(255, 65, 54)'],
    size: responses
  }
};

var bubbleData = [bubbleTrace1];

var bubbleLayout = {
  // title: '311 Average Response times by ward',
  showlegend: false,
  height: 500,
  width: 500
};

Plotly.newPlot('bubble', bubbleData, bubbleLayout);